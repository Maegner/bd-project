<html>
    <head>
        <meta charset="utf-8">
        <title> Projeto de BD </title>
        <link rel="stylesheet" href="style.css">
    </head>

    <script>
            function updateSec() {
                var table = document.getElementById("TabelaProduto");
                var nifRow = document.getElementById("PrimeiroNIFSecundario");
                var nameRow = document.getElementById("PrimeiroNOMESecundario");
                var numberOfSecs = document.getElementById("secondaryNumber").value;
    
                var firstRow = table.rows[8];
                while (firstRow.className == "FornecedorSec") {
                    table.deleteRow(8);
                    table.deleteRow(8);
                    firstRow = table.rows[8];
                }
    
                for (var i = 0; i < numberOfSecs-1; ++i) {
                    var newRow = nifRow.cloneNode(true);
                    newRow.children[1].children[0].name = "FornecedorSecundarioNif".concat((i+2).toString());
                    newRow.children[0].innerHTML = "NIF Fornecedor Secundario ".concat((i+2).toString(), ":");
                    var index = 8 + i*2;
                    table.children[0].insertBefore(newRow, table.children[0].children[index]);
    
                    var newRow = nameRow.cloneNode(true);
                    newRow.children[1].children[0].name = "FornecedorSecundarioNome".concat((i+2).toString());
                    newRow.children[0].innerHTML = "Nome Fornecedor Secundario ".concat((i+2).toString(), ":");
                    var index = 9 + i*2;
                    table.children[0].insertBefore(newRow, table.children[0].children[index]);
                    
                    console.log(newRow.children[1].children[0].name);
                }
            }
        </script>

    <body>
        <div id = "Query2" class = "Query" style="float:left">
            <h3>Adicionar ou remover produto</h3>

            <form action="../applicationTier/produto.php" method="post">
                <table id="TabelaProduto" style="text-align: right;">
                    <tr>
                        <td>EAN: </td>
                        <td class="inputColumn"><input type="text" name="EAN"/></td> 
                    </tr>
                    <tr>
                        <td>Designação: </td>
                        <td class="inputColumn"><input type="text" name="Designacao"/></td> 
                    </tr>
                    <tr>
                        <td>Categoria: </td>
                        <td class="inputColumn"><input type="text" name="Categoria"/></td> 
                    </tr>
                    <tr>
                        <td>NIF Fornecedor Primário: </td>
                        <td class="inputColumn"><input type="text" name="FornecedorPrimarioNif"/></td> 
                    </tr>
                    <tr>
                        <td>Nome Fornecedor Primário: </td>
                        <td class="inputColumn"><input type="text" name="FornecedorPrimarioNome"/></td> 
                    </tr>
                    <tr>
                        <td>Fornecedores Secundários: </td>
                        <td class="inputColumn"><input type="number" name="FornecedoresSecundarios" min="1" onchange="updateSec()" id="secondaryNumber"></td> 
                    </tr>
                    <tr id="PrimeiroNIFSecundario" class="FornecedorSec">
                        <td>NIF Fornecedor Secundário 1: </td>
                        <td class="inputColumn"><input type="text" name="FornecedorSecundarioNif1"/></td> 
                    </tr>
                    <tr id="PrimeiroNOMESecundario" class="FornecedorSec">
                        <td>Nome Fornecedor Secundário 1: </td>
                        <td class="inputColumn"><input type="text" name="FornecedorSecundarioNome1"/></td> 
                    </tr>
                    <tr>
                        <td>Data: </td>
                        <td class="inputColumn"><input type="text" name="DataProduto"/></td> 
                    </tr>
                    <tr>
                        <td>Remover</td>
                        <td class="inputColumn"><input type="checkbox" name="RemoverProduto"/></td> 
                    </tr>
                </table>
                <p> <input type="submit" value="Submit"/> </p>
            </form>
        </div>
    </body>
</html>